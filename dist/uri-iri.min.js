/*
 URI.js v2.0.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js
*/
var URI=function(){function g(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(1<a.length){a[0]=a[0].slice(0,-1);for(var b=a.length-1,c=1;c<b;++c)a[c]=a[c].slice(1,-1);a[b]=a[b].slice(1);return a.join("")}return a[0]}function A(a){var b=g("[0-9]","[A-Fa-f]"),c=g("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",a?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");return{v:!1,l:new RegExp(g("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),m:new RegExp(g("[^\\%\\:]",c,
"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),g:new RegExp(g("[^\\%]",c,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),h:new RegExp(g("[^\\%\\/\\:\\@]",c,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),i:new RegExp(g("[^\\%\\/\\@]",c,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),j:new RegExp(g("[^\\%]",c,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@\\/\\?]",a?"[\\uE000-\\uF8FF]":"[]"),"g"),f:new RegExp(g("[^\\%]",c,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@\\/\\?]"),"g"),b:new RegExp(g("[^]",c,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),
"g"),o:new RegExp(c,"g"),u:new RegExp(g("[^\\%]",c,g("[\\:\\/\\?\\#\\[\\]\\@]","[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]")),"g"),a:new RegExp("(?:"+("(?:"+("%[EFef]"+b+"%"+b+b+"%"+b+b)+")|"+("(?:"+("%[89A-Fa-f]"+b+"%"+b+b)+")")+"|"+("(?:"+("%"+b+b)+")"))+")","g")}}function t(a){a=a.charCodeAt(0);var b;16>a?b="%0"+a.toString(16).toUpperCase():128>a?b="%"+a.toString(16).toUpperCase():b=2048>a?"%"+(a>>6|192).toString(16).toUpperCase()+"%"+(a&63|128).toString(16).toUpperCase():"%"+(a>>12|224).toString(16).toUpperCase()+
"%"+(a>>6&63|128).toString(16).toUpperCase()+"%"+(a&63|128).toString(16).toUpperCase();return b}function v(a){for(var b="",c=0,f=a.length,d,e,h;c<f;)d=parseInt(a.substr(c+1,2),16),128>d?(b+=String.fromCharCode(d),c+=3):194<=d&&224>d?(6<=f-c?(e=parseInt(a.substr(c+4,2),16),b+=String.fromCharCode((d&31)<<6|e&63)):b+=a.substr(c,6),c+=6):224<=d?(9<=f-c?(e=parseInt(a.substr(c+4,2),16),h=parseInt(a.substr(c+7,2),16),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|h&63)):b+=a.substr(c,9),c+=9):(b+=a.substr(c,
3),c+=3);return b}function y(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()}function w(a){return a.toUpperCase()}function z(a,b){function c(a){var c=v(a);return c.match(b.o)?c:a}a.scheme&&(a.scheme=String(a.scheme).replace(b.a,c).toLowerCase().replace(b.l,""));void 0!==a.userinfo&&(a.userinfo=String(a.userinfo).replace(b.a,c).replace(b.m,t).replace(/%[0-9A-Fa-f]{2}/g,w));void 0!==a.host&&(a.host=String(a.host).replace(b.a,
c).toLowerCase().replace(b.g,t).replace(/%[0-9A-Fa-f]{2}/g,w));void 0!==a.path&&(a.path=String(a.path).replace(b.a,c).replace(a.scheme?b.h:b.i,t).replace(/%[0-9A-Fa-f]{2}/g,w));void 0!==a.query&&(a.query=String(a.query).replace(b.a,c).replace(b.j,t).replace(/%[0-9A-Fa-f]{2}/g,w));void 0!==a.fragment&&(a.fragment=String(a.fragment).replace(b.a,c).replace(b.f,t).replace(/%[0-9A-Fa-f]{2}/g,w))}function m(a,b){void 0===b&&(b={});var c=!1!==b.iri?u:q,f,d={};"suffix"===b.reference&&(a=(b.scheme?b.scheme+
":":"")+"//"+a);if(f=a.match(e)){E?(d.scheme=f[1],d.userinfo=f[3],d.host=f[4],d.port=parseInt(f[5],10),d.path=f[6]||"",d.query=f[7],d.fragment=f[8],isNaN(d.port)&&(d.port=f[5])):(d.scheme=f[1]||void 0,d.userinfo=-1!==a.indexOf("@")?f[3]:void 0,d.host=-1!==a.indexOf("//")?f[4]:void 0,d.port=parseInt(f[5],10),d.path=f[6]||"",d.query=-1!==a.indexOf("?")?f[7]:void 0,d.fragment=-1!==a.indexOf("#")?f[8]:void 0,isNaN(d.port)&&(d.port=a.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?f[4]:void 0));d.reference=void 0===
d.scheme&&void 0===d.userinfo&&void 0===d.host&&void 0===d.port&&void 0===d.path&&void 0===d.query?"same-document":void 0===d.scheme?"relative":void 0===d.fragment?"absolute":"uri";b.reference&&"suffix"!==b.reference&&b.reference!==d.reference&&(d.error=d.error||"URI is not a "+b.reference+" reference.");f=p[(b.scheme||d.scheme||"").toLowerCase()];if(b.unicodeSupport||f&&f.unicodeSupport)z(d,c);else{if(d.host&&(b.domainHost||f&&f.domainHost))try{d.host=D.c(d.host.replace(c.a,v).toLowerCase())}catch(h){d.error=
d.error||"Host's domain name can not be converted to ASCII via punycode: "+h}z(d,q)}f&&f.parse&&f.parse(d,b)}else d.error=d.error||"URI can not be parsed.";return d}function B(a){var b=[];void 0!==a.userinfo&&(b.push(a.userinfo),b.push("@"));void 0!==a.host&&b.push(a.host);"number"===typeof a.port&&(b.push(":"),b.push(a.port.toString(10)));return b.length?b.join(""):void 0}function x(a){for(var b=[],c;a.length;)a.match(h)?a=a.replace(h,""):a.match(k)?a=a.replace(k,"/"):a.match(l)?(a=a.replace(l,"/"),
b.pop()):"."===a||".."===a?a="":(c=a.match(n)[0],a=a.slice(c.length),b.push(c));return b.join("")}function r(a,b){void 0===b&&(b={});var c=b.iri?u:q,f=[],d,e;(d=p[(b.scheme||a.scheme||"").toLowerCase()])&&d.serialize&&d.serialize(a,b);if(a.host&&(b.domainHost||d&&d.domainHost))try{a.host=b.iri?D.s(a.host):D.c(a.host.replace(c.a,v).toLowerCase())}catch(h){a.error=a.error||"Host's domain name can not be converted to "+(b.iri?"Unicode":"ASCII")+" via punycode: "+h}z(a,c);"suffix"!==b.reference&&a.scheme&&
(f.push(a.scheme),f.push(":"));c=B(a);void 0!==c&&("suffix"!==b.reference&&f.push("//"),f.push(c),a.path&&"/"!==a.path.charAt(0)&&f.push("/"));void 0!==a.path&&(e=a.path,b.absolutePath||d&&d.absolutePath||(e=x(e)),void 0===c&&(e=e.replace(/^\/\//,"/%2F")),f.push(e));void 0!==a.query&&(f.push("?"),f.push(a.query));void 0!==a.fragment&&(f.push("#"),f.push(a.fragment));return f.join("")}function C(a,b,c,f){void 0===c&&(c={});var d={};f||(a=m(r(a,c),c),b=m(r(b,c),c));c=c||{};!c.tolerant&&b.scheme?(d.scheme=
b.scheme,d.userinfo=b.userinfo,d.host=b.host,d.port=b.port,d.path=x(b.path),d.query=b.query):(void 0!==b.userinfo||void 0!==b.host||void 0!==b.port?(d.userinfo=b.userinfo,d.host=b.host,d.port=b.port,d.path=x(b.path),d.query=b.query):(b.path?("/"===b.path.charAt(0)?d.path=x(b.path):(void 0===a.userinfo&&void 0===a.host&&void 0===a.port||a.path?a.path?d.path=a.path.slice(0,a.path.lastIndexOf("/")+1)+b.path:d.path=b.path:d.path="/"+b.path,d.path=x(d.path)),d.query=b.query):(d.path=a.path,d.query=void 0!==
b.query?b.query:a.query),d.userinfo=a.userinfo,d.host=a.host,d.port=a.port),d.scheme=a.scheme);d.fragment=b.fragment;return d}var q=A(!1),u=A(!0),e=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n)*))?/i,h=/^\.\.?\//,k=/^\/\.(\/|$)/,l=/^\/\.\.(\/|$)/,n=/^\/?(?:.|\n)*?(?=\/|$)/,E=void 0==="".match(/(){0}/)[1],p={};return{IRI_SUPPORT:!0,VALIDATE_SUPPORT:!1,pctEncChar:t,pctDecChars:v,SCHEMES:p,parse:m,_recomposeAuthority:B,removeDotSegments:x,serialize:r,
resolveComponents:C,resolve:function(a,b,c){return r(C(m(a,c),m(b,c),c,!0),c)},normalize:function(a,b){"string"===typeof a?a=r(m(a,b),b):"object"===y(a)&&(a=m(r(a,b),b));return a},equal:function(a,b,c){"string"===typeof a?a=r(m(a,c),c):"object"===y(a)&&(a=r(a,c));"string"===typeof b?b=r(m(b,c),c):"object"===y(b)&&(b=r(b,c));return a===b},escapeComponent:function(a,b){return a&&a.toString().replace(b&&b.iri?u.b:q.b,t)},unescapeComponent:function(a,b){return a&&a.toString().replace(b&&b.iri?u.a:q.a,
v)}}}();var D=function(){function g(e){throw new RangeError(C[e]);}function A(e,h){for(var k=e.length,g=[];k--;)g[k]=h(e[k]);return g}function t(e,h){var k=e.split("@"),g="";1<k.length&&(g=k[0]+"@",e=k[1]);e=e.replace(r,".");k=A(e.split("."),h).join(".");return g+k}function v(e){for(var h=[],g=0,l=e.length,n,q;g<l;)n=e.charCodeAt(g++),55296<=n&&56319>=n&&g<l?(q=e.charCodeAt(g++),56320==(q&64512)?h.push(((n&1023)<<10)+(q&1023)+65536):(h.push(n),g--)):h.push(n);return h}function y(e){return A(e,function(e){var g=
"";65535<e&&(e-=65536,g+=u(e>>>10&1023|55296),e=56320|e&1023);return g+=u(e)}).join("")}function w(e,g,k){var l=0;e=k?q(e/700):e>>1;for(e+=q(e/g);455<e;l+=36)e=q(e/35);return q(l+36*e/(e+38))}function z(e){var h=[],k=e.length,l,n=0,m=128,p=72,a,b,c,f,d;a=e.lastIndexOf("-");0>a&&(a=0);for(b=0;b<a;++b)128<=e.charCodeAt(b)&&g("not-basic"),h.push(e.charCodeAt(b));for(a=0<a?a+1:0;a<k;){b=n;l=1;for(c=36;;c+=36){a>=k&&g("invalid-input");f=e.charCodeAt(a++);f=10>f-48?f-22:26>f-65?f-65:26>f-97?f-97:36;(36<=
f||f>q((2147483647-n)/l))&&g("overflow");n+=f*l;d=c<=p?1:c>=p+26?26:c-p;if(f<d)break;f=36-d;l>q(2147483647/f)&&g("overflow");l*=f}l=h.length+1;p=w(n-b,l,0==b);q(n/l)>2147483647-m&&g("overflow");m+=q(n/l);n%=l;h.splice(n++,0,m)}return y(h)}function m(e){var h,k,l,n,m,p,a,b,c,f=[],d,r,t;e=v(e);d=e.length;h=128;k=0;m=72;for(p=0;p<d;++p)c=e[p],128>c&&f.push(u(c));for((l=n=f.length)&&f.push("-");l<d;){a=2147483647;for(p=0;p<d;++p)c=e[p],c>=h&&c<a&&(a=c);r=l+1;a-h>q((2147483647-k)/r)&&g("overflow");k+=
(a-h)*r;h=a;for(p=0;p<d;++p)if(c=e[p],c<h&&2147483647<++k&&g("overflow"),c==h){b=k;for(a=36;;a+=36){c=a<=m?1:a>=m+26?26:a-m;if(b<c)break;t=b-c;b=36-c;c=c+t%b;f.push(u(c+22+75*(26>c)-0));b=q(t/b)}f.push(u(b+22+75*(26>b)-0));m=w(k,r,l==n);k=0;++l}++k;++h}return f.join("")}var B=/^xn--/,x=/[^\x20-\x7E]/,r=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},q=Math.floor,
u=String.fromCharCode;return{version:"1.3.2",w:{decode:v,encode:y},decode:z,encode:m,c:function(e){return t(e,function(e){return x.test(e)?"xn--"+m(e):e})},s:function(e){return t(e,function(e){return B.test(e)?z(e.slice(4).toLowerCase()):e})}}}();URI.SCHEMES.http=URI.SCHEMES.https={domainHost:!0,parse:function(g){g.host||(g.error=g.error||"HTTP URIs must have a host.");return g},serialize:function(g){if(g.port===("https"!==String(g.scheme).toLowerCase()?80:443)||""===g.port)g.port=void 0;g.path||(g.path="/");return g}};
